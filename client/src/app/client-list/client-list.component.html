<section id="client-section">

    <article class="client-create">
      <h2 class="page-title">Add a Client</h2>
      <form #clientForm="ngForm" (ngSubmit)="createClient(clientForm)" novalidate>
        
        <div class="input-section">
          <label for="name">Client Name:</label>
          <input type="text" id="name" class="form-control" placeholder="Type the new clients name..." 
                 required
                 name="name" [(ngModel)]="newClient.name"
                 #name="ngModel" >
          <div *ngIf="name.errors && name.dirty"
               class="alert alert-danger">
              <div [hidden]="!name.errors.required">
                Client name is required.
              </div>
          </div>
        </div>

        <div class="input-section">
          <label for="products">Product List:</label>
          <textarea rows="4" cols="50" type="text" id="products" class="form-control" placeholder="Type your clients products below..." 
                 required
                 name="products" [(ngModel)]="newClient.products"
                 #products="ngModel" ></textarea>
          <div *ngIf="products.errors && products.dirty"
               class="alert alert-danger">
              <div [hidden]="!products.errors.required">
                At least one product is required.
              </div>
          </div>
        </div>
        
        <button class="custom-button" *ngIf="!name.errors && !products.errors">Add new client!</button>
      </form>
    </article>

    <article class="client-list">
      
      <div class="no-clients" *ngIf="clients && clients.length > 0">
          <h2 class="page-title">Current Clients</h2>
      </div>

      <div class="no-clients" *ngIf="clients && clients.length == 0">
        <h2 class="page-title">No Current Clients</h2>
      </div>

      <div *ngIf="clients && clients.length > 0">
        <div  class="header-row flex-grid">
          <span class="col">
            Client Name
          </span>
          <span class="col">
            Products
          </span>
          <span class="col">
            Tools
          </span>

        </div>
      </div>

      <div *ngFor="let client of clients">
            <div class="client-row flex-grid" *ngIf="!editing || editingClient.id != client.id">
                <span class="client-name col">
                  {{client.name}}
                </span>
                <span class="client-products col">
                    {{client.products}}
                </span>
                <span class="client-actions col">
                    <a (click)="editClient(client)">
                      <i class="material-icons edit">edit</i>
                    </a>
                    <a (click)="deleteClient(client.id)">
                      <i class="material-icons delete">clear</i>
                    </a>
                </span>
            </div>
            <div class="todo-edit flex-grid client-row" *ngIf="editing && editingClient.id === client.id.toString()">
                <input class="form-control col" type="text" 
                [(ngModel)]="editingClient.name" required>
                <input class="form-control col" type="text" 
                [(ngModel)]="editingClient.products" required>
                <span class="edit-actions col">
                    <a (click)="updateClient(editingClient.id, editingClient)">
                      <i class="material-icons">done</i>
                    </a>
                    <a (click)="clearEditing()">
                      <i class="material-icons">clear</i> 
                    </a>
                </span>
            </div>
      </div>

    </article>

</section>
